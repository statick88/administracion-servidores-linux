[
  {
    "objectID": "anexos/rsync-nginx-course.html",
    "href": "anexos/rsync-nginx-course.html",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "",
    "text": "Rsync y Nginx - Guía de Laboratorio",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#resumen-de-problemas-y-soluciones",
    "href": "anexos/rsync-nginx-course.html#resumen-de-problemas-y-soluciones",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "Resumen de Problemas y Soluciones",
    "text": "Resumen de Problemas y Soluciones",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#error-rsync-permission-denied",
    "href": "anexos/rsync-nginx-course.html#error-rsync-permission-denied",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "1. Error Rsync: Permission Denied",
    "text": "1. Error Rsync: Permission Denied\n\nProblema\nrsync: [receiver] mkdir \"/var/www/html/site\" failed: Permission denied (13)\nrsync: [receiver] mkstemp \"/usr/share/nginx/html/.example.tar.gz.WXvxvL\" failed: Permission denied (13)\n\n\nCausa\nEl usuario no tiene permisos de escritura en los directorios destino del servidor remoto.\n\n\nSolución\n\nOpción A: Crear directorio con permisos adecuados\n\n\nBASH\n\n# En el servidor destino (192.168.56.10):\n1ssh usuario@192.168.56.10\n2sudo mkdir -p /var/www/html/site\n3sudo chown -R usuario:usuario /var/www/html/site\nexit\n\n# Desde el servidor origen:\n4rsync /tmp/example.tar.gz usuario@192.168.56.10:/var/www/html/site/\n\n\n1\n\nssh conecta al servidor remoto para configurar permisos.\n\n2\n\nmkdir -p crea el directorio destino si no existe.\n\n3\n\nchown cambia propietario para permitir escritura del usuario.\n\n4\n\nrsync transfiere el archivo al directorio configurado.\n\n\n\n\nOpción B: Usar directorio home del usuario\n\n\nBASH\n\n1rsync /tmp/example.tar.gz usuario@192.168.56.10:~/site/\n\n\n1\n\n~/ usa el directorio home del usuario, que siempre tiene permisos de escritura.\n\n\n\n\nOpción C: Rsync con sudo en el servidor remoto\n\n\nBASH\n\n1rsync --rsync-path=\"sudo rsync\" /tmp/example.tar.gz usuario@192.168.56.10:/var/www/html/site/\n\n\n1\n\n–rsync-path=“sudo rsync” ejecuta rsync con privilegios elevados en el destino.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#error-nginx-404-not-found",
    "href": "anexos/rsync-nginx-course.html#error-nginx-404-not-found",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "2. Error Nginx: 404 Not Found",
    "text": "2. Error Nginx: 404 Not Found\n\nProblema\nNginx sirve desde /var/www/html pero los archivos están en /usr/share/nginx/html/.\n\n\nSolución\n\nOpción A: Copiar archivos al directorio correcto de nginx\n\n\nBASH\n\n1sudo cp /usr/share/nginx/html/index.html /var/www/html/\n2sudo cp /home/usuario/mirepositorio/* /var/www/html/\n3sudo nginx -s reload\n\n\n1\n\ncp copia archivos desde la ubicación de instalación al root de nginx.\n\n2\n\ncp / copia todos los archivos del proyecto web.\n\n3\n\nnginx -s reload recarga la configuración sin reiniciar el servicio.\n\n\n\n\nOpción B: Cambiar la raíz de documentos de nginx\n\n\nBASH\n\n# Editar /etc/nginx/sites-enabled/default:\n1sudo nano /etc/nginx/sites-enabled/default\n\n# Cambiar:\n# root /var/www/html;\nroot /usr/share/nginx/html;\n\n# Verificar y recargar:\n2sudo nginx -t && sudo nginx -s reload\n\n\n1\n\nnano abre el archivo de configuración del sitio.\n\n2\n\nnginx -t valida la sintaxis antes de aplicar cambios.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#backup-entre-servidores",
    "href": "anexos/rsync-nginx-course.html#backup-entre-servidores",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "3. Backup entre Servidores",
    "text": "3. Backup entre Servidores\n\nEscenario\n\nOrigen: usuario@192.168.56.10:/usr/share/nginx/html/\nDestino: usuario@192.168.56.20\n\n\n\nBackup en directorio home\n\n\nBASH\n\n# Desde el servidor destino (192.168.56.20):\n1rsync -avz usuario@192.168.56.10:/usr/share/nginx/html/ ~/nginx-backup/\n\n\n1\n\nrsync -avz sincroniza con verbose y compresión, descargando del origen.\n\n\n\n\nBackup en /opt/backup\n\n\nBASH\n\n# En el servidor destino (192.168.56.20):\n1sudo mkdir -p /opt/backup\n2sudo chown usuario:usuario /opt/backup\n\n# Transferir:\n3rsync -avz usuario@192.168.56.10:/usr/share/nginx/html/ /opt/backup/\n\n\n1\n\nmkdir -p crea el directorio de backup con permisos de root.\n\n2\n\nchown transfiere propiedad al usuario para futuras sincronizaciones.\n\n3\n\nrsync sincroniza directamente al directorio de backup.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#comandos-rsync-útiles",
    "href": "anexos/rsync-nginx-course.html#comandos-rsync-útiles",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "4. Comandos Rsync Útiles",
    "text": "4. Comandos Rsync Útiles\n\nSincronización básica\n\n\nBASH\n\n1rsync -avz origen/ destino/\n\n\n1\n\n-a modo archivo (preserva permisos, timestamps, etc.), -v verbose, -z comprime.\n\n\n\n\nCopiar archivo específico\n\n\nBASH\n\n1rsync /tmp/example.tar.gz usuario@192.168.56.10:/var/www/html/site/\n\n\n1\n\nTransfiere un archivo individual al servidor remoto.\n\n\n\n\nModo verbose y progreso\n\n\nBASH\n\n1rsync -avz --progress origen/ destino/\n\n\n1\n\n–progress muestra barra de progreso y velocidad de transferencia.\n\n\n\n\nEliminar archivos en destino que no existen en origen\n\n\nBASH\n\n1rsync -avz --delete origen/ destino/\n\n\n1\n\n–delete sincroniza exactamente, eliminando archivos obsoletos.\n\n\n\n\nComprimir durante transferencia\n\n\nBASH\n\n1rsync -az origen/ destino/\n\n\n1\n\n-a -z combina archivado con compresión.\n\n\n\n\nMantener permisos y propietarios\n\n\nBASH\n\n1rsync -avz --preserve=mode,ownership origen/ destino/\n\n\n1\n\n–preserve=mode,ownership asegura que permisos se mantengan en la copia.\n\n\n\n\nSincronización con SSH\n\n\nBASH\n\n1rsync -avz -e \"ssh -i ~/.ssh/id_ed25519\" origen/ usuario@192.168.56.10:~/destino/\n\n\n1\n\n-e “ssh” especifica el comando SSH a usar, con clave específica.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#comandos-nginx-útiles",
    "href": "anexos/rsync-nginx-course.html#comandos-nginx-útiles",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "5. Comandos Nginx Útiles",
    "text": "5. Comandos Nginx Útiles\n\nVerificar configuración\n\n\nBASH\n\n1sudo nginx -t\n\n\n1\n\nnginx -t valida sintaxis sin aplicar cambios.\n\n\n\n\nVer configuración completa\n\n\nBASH\n\n1sudo nginx -T\n\n\n1\n\n-T muestra toda la configuración incluyendo server blocks.\n\n\n\n\nRecargar configuración\n\n\nBASH\n\n1sudo nginx -s reload\n\n\n1\n\n-s reload recarga configuración gracefully sin cortar conexiones.\n\n\n\n\nReiniciar nginx\n\n\nBASH\n\n1sudo systemctl restart nginx\n\n\n1\n\nsystemctl restart reinicia el servicio completamente.\n\n\n\n\nVer estado del servicio\n\n\nBASH\n\n1sudo systemctl status nginx\n\n\n1\n\nstatus muestra estado actual y logs recientes.\n\n\n\n\nVer logs de errores en tiempo real\n\n\nBASH\n\n1sudo tail -f /var/log/nginx/error.log\n\n\n1\n\ntail -f sigue el archivo de log en tiempo real.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#estructura-de-directorios-nginx",
    "href": "anexos/rsync-nginx-course.html#estructura-de-directorios-nginx",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "6. Estructura de Directorios Nginx",
    "text": "6. Estructura de Directorios Nginx\n\nDirectorios comunes\n/etc/nginx/              # Configuración principal\n/etc/nginx/nginx.conf    # Archivo de configuración principal\n/etc/nginx/sites-available/   # Sitios disponibles\n/etc/nginx/sites-enabled/     # Sitios activos (symlinks)\n/etc/nginx/conf.d/        # Configuración adicional\n/usr/share/nginx/html/    # Archivos web (en Ubuntu/Debian)\n/var/www/html/            # Raíz de documentos por defecto",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#variables-de-entorno-del-servidor",
    "href": "anexos/rsync-nginx-course.html#variables-de-entorno-del-servidor",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "7. Variables de Entorno del Servidor",
    "text": "7. Variables de Entorno del Servidor\n\nIP del servidor actual\n\n\nBASH\n\n1hostname -I | awk '{print $1}'\n\n\n1\n\nhostname -I obtiene todas las IPs del servidor.\n\n\n\n\nIP del servidor destino\n\n\nBASH\n\n# Disponible en la red local\n# Verificar conectividad:\n1ping -c 1 192.168.56.10\n\n\n1\n\nping verifica que el servidor destino es alcanzable.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#conexión-ssh-entre-servidores",
    "href": "anexos/rsync-nginx-course.html#conexión-ssh-entre-servidores",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "8. Conexión SSH entre Servidores",
    "text": "8. Conexión SSH entre Servidores\n\nGenerar clave SSH (si no existe)\n\n\nBASH\n\n1ssh-keygen -t ed25519 -C \"usuario@laboratorio\"\n\n\n1\n\nssh-keygen crea un par de claves ed25519 modernas.\n\n\n\n\nCopiar clave al servidor destino\n\n\nBASH\n\n1ssh-copy-id usuario@192.168.56.10\n\n\n1\n\nssh-copy-id automatiza la instalación de clave pública en authorized_keys.\n\n\n\n\nConectar al servidor destino\n\n\nBASH\n\n1ssh usuario@192.168.56.10\n\n\n1\n\nssh conecta al servidor remoto con autenticación de clave.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#permisos-de-archivos",
    "href": "anexos/rsync-nginx-course.html#permisos-de-archivos",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "9. Permisos de Archivos",
    "text": "9. Permisos de Archivos\n\nchmod básico\n\n\nBASH\n\n1chmod 600 archivo\n2chmod 644 archivo\n3chmod 755 archivo\n\n\n1\n\n600 lectura/escritura solo para propietario.\n\n2\n\n644 lectura para todos, escritura para propietario.\n\n3\n\n755 lectura/ejecución para todos, escritura para propietario.\n\n\n\n\nchown para cambiar propietario\n\n\nBASH\n\n1chown usuario:grupo archivo\n2chown -R usuario:grupo /directorio/\n\n\n1\n\nchown cambia propietario y grupo de un archivo.\n\n2\n\n-R aplica recursivamente a subdirectorios y archivos.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#seguridad",
    "href": "anexos/rsync-nginx-course.html#seguridad",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "10. Seguridad",
    "text": "10. Seguridad\n\nNo exponer contraseñas en comandos\n\nUsar claves SSH en lugar de contraseñas\nUsar ssh-copy-id para configurar autenticación sin contraseña\nNunca compartir contraseñas en scripts o historial\n\n\n\nVerificar fingerprint SSH\nThe authenticity of host '192.168.56.10 (192.168.56.10)' can't be established.\nED25519 key fingerprint is SHA256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.\n\n\nVerificar host key antes de conectar\n\n\nBASH\n\n1ssh-keyscan -H 192.168.56.10 &gt;&gt; ~/.ssh/known_hosts\n\n\n1\n\nssh-keyscan obtiene y guarda el fingerprint del host remoto.",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#práctica-de-laboratorio-rsync-entre-servidores-nginx",
    "href": "anexos/rsync-nginx-course.html#práctica-de-laboratorio-rsync-entre-servidores-nginx",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "Práctica de Laboratorio: Rsync entre Servidores Nginx",
    "text": "Práctica de Laboratorio: Rsync entre Servidores Nginx\n\nEscenario del Laboratorio\nServidor 1 (Origen):\n\n\nBASH\n\n1statick@ubuntu-server:~$ hostname -I | awk '{print $1}'\n192.168.56.10\n\n\n1\n\nhostname -I obtiene la IP del servidor origen.\n\n\nServidor 2 (Destino):\n\n\nBASH\n\n1statick@ubuntu-server:~$ hostname -I | awk '{print $1}'\n192.168.56.20\n\n\n1\n\nhostname -I obtiene la IP del servidor destino.\n\n\n\n\nEjercicio 1: Verificar contenido del servidor origen\n\n\nBASH\n\n1statick@ubuntu-server:~$ cat /usr/share/nginx/html/index.html\n&lt;h1&gt;Hello World from Nginx&lt;/h1&gt;\n&lt;h2&gt;Esto es una prueba&lt;/h2&gt;\n&lt;p&gt;Mi nombre es Diego Saavedra&lt;/p&gt;\n&lt;h3&gt;Esto es un cambio en la rama experimental&lt;/h3&gt;\n&lt;h3&gt;Esto es para verificar cambios en github&lt;/h3&gt;\n&lt;p&gt;Esto es un cambio para verificar que funciona bien git push&lt;/p&gt;\n&lt;p&gt;Esto es una prueba del enlace simbolico del repositorio en mi nginx&lt;/p&gt;\n\n\n1\n\ncat muestra el contenido del archivo HTML que será sincronizado.\n\n\n\n\nEjercicio 2: Error - Host no alcanzable\n\n\nBASH\n\n1statick@ubuntu-server:~$ rsync -avz /usr/share/nginx/html/* statick@192.168.56.30:/var/www/html/site/\n2ssh: connect to host 192.168.56.30 port 22: No route to host\nrsync: connection unexpectedly closed (0 bytes received so far) [sender]\nrsync error: unexplained error (code 255) at io.c(232) [sender=3.2.7]\n# &lt;1&gt; &lt;2&gt;\n\n\n1\n\nrsync -avz intenta sincronizar archivos al servidor destino.\n\n2\n\nNo route to host indica que la IP de destino no es alcanzable en la red.\n\n\nDiagnóstico:\n\n\nBASH\n\n1ping -c 1 192.168.56.30\n\n\n1\n\nping verifica conectividad de red con el servidor destino.\n\n\n\n\nEjercicio 3: Error - Permiso denegado\n\n\nBASH\n\n1statick@ubuntu-server:~$ rsync -avz /usr/share/nginx/html/* statick@192.168.56.20:/var/www/html/site/\n2statick@192.168.56.20's password:\nsending incremental file list\n3rsync: [Receiver] mkdir \"/var/www/html/site\" failed: Permission denied (13)\nrsync error: error in file IO (code 11) at main.c(791) [Receiver=3.2.7]\n# &lt;1&gt; &lt;2&gt; &lt;3&gt;\n\n\n1\n\nrsync -avz sincroniza al directorio destino.\n\n2\n\npassword es requerido porque la clave SSH no está configurada o el usuario no tiene permisos.\n\n3\n\nPermission denied indica que el usuario no puede crear el directorio en el destino.\n\n\nSolución en el servidor destino:\n\n\nBASH\n\n1statick@ubuntu-server:~$ ssh statick@192.168.56.20\n2sudo mkdir -p /var/www/html/site\n3sudo chown -R statick:statick /var/www/html/site\n4exit\n# &lt;1&gt; &lt;2&gt; &lt;3&gt; &lt;4&gt;\n\n\n1\n\nssh conecta al servidor destino.\n\n2\n\nmkdir -p crea el directorio destino si no existe.\n\n3\n\nchown cambia el propietario para permitir escritura del usuario.\n\n4\n\nexit cierra la conexión SSH.\n\n\n\n\nEjercicio 4: Sincronización exitosa a /opt/backup\n\n\nBASH\n\n1statick@ubuntu-server:~$ rsync -avz /usr/share/nginx/html/* statick@192.168.56.20:/opt/backup/\n2statick@192.168.56.20's password:\nsending incremental file list\n3index.html -&gt; ../../../../home/statick/myrepository/index.html\n\nsent 112 bytes  received 19 bytes  52,40 bytes/sec\ntotal size is 48  speedup is 0,37\n# &lt;1&gt; &lt;2&gt; &lt;3&gt;\n\n\n1\n\nrsync -avz sincroniza al directorio /opt/backup/ que tiene permisos de escritura.\n\n2\n\npassword autenticación con contraseña (para laboratorio).\n\n3\n\nEl symlink -&gt; indica que el archivo es un enlace simbólico.\n\n\n\n\nEjercicio 5: Sincronización con nombre de archivo específico\n\n\nBASH\n\n1statick@ubuntu-server:~$ rsync -avz /usr/share/nginx/html/* statick@192.168.56.20:/opt/backup/backup.tar.gz\n2statick@192.168.56.20's password:\nsending incremental file list\n3index.html -&gt; ../../../../home/statick/myrepository/index.html\n\nsent 112 bytes  received 19 bytes  37,43 bytes/sec\ntotal size is 48  speedup is 0,37\n# &lt;1&gt; &lt;2&gt; &lt;3&gt;\n\n\n1\n\nrsync con nombre de archivo destino específico.\n\n2\n\npassword autenticación requerida.\n\n3\n\n-&gt; indica que el archivo origen es un symlink.\n\n\n\n\nEjercicio 6: Verificar sincronización exitosa\n\n\nBASH\n\n1statick@ubuntu-server:~$ ssh statick@192.168.56.20\n2ls -la /opt/backup/\n3exit\n# &lt;1&gt; &lt;2&gt; &lt;3&gt;\n\n\n1\n\nssh conecta al servidor destino.\n\n2\n\nls -la lista los archivos sincronizados.\n\n3\n\nexit cierra la sesión SSH.\n\n\n\n\nChecklist de Verificación\n\n\n\n\n\n\n\n\nPaso\nComando\nEsperado\n\n\n\n\n1\nping -c 1 IP_DESTINO\n0% packet loss\n\n\n2\nssh usuario@IP_DESTINO\nConexión exitosa\n\n\n3\nsudo mkdir -p /RUTA/DESTINO\nDirectorio creado\n\n\n4\nsudo chown usuario:usuario /RUTA/DESTINO\nPermisos correctos\n\n\n5\nrsync -avz origen/ usuario@IP_DESTINO:/RUTA/\nTransferencia exitosa",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  },
  {
    "objectID": "anexos/rsync-nginx-course.html#notas",
    "href": "anexos/rsync-nginx-course.html#notas",
    "title": "Rsync y Nginx - Guía de Laboratorio",
    "section": "Notas",
    "text": "Notas\n\nEl directorio /usr/share/nginx/html/ es la ubicación estándar en Ubuntu/Debian\nEl directorio /var/www/html/ es la raíz de documentos por defecto en nginx\nRsync requiere permisos de escritura en el destino\nUsar -avz para transferencias completas y comprimidas\nVerificar siempre la configuración de nginx antes de recargar con nginx -t\nLas IPs 192.168.56.x son para redes locales de laboratorio",
    "crumbs": [
      "Anexos: Mini-Cursos (Nivel 3: Avanzado)",
      "<span class='chapter-number'>102</span>  <span class='chapter-title'>Rsync y Nginx - Guía de Laboratorio</span>"
    ]
  }
]